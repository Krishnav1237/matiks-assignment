<%- include('layout', { body: `

<!-- Strict Box Aligned Header -->
<div class="page-header" style="height: 80px; background: white; border-bottom: 1px solid #E5E7EB; padding: 0 32px; display: flex; align-items: center;">
  <div style="flex: 1;">
    <h1 class="page-header-title" style="font-size: 1.5rem; font-weight: 700; color: #111827; letter-spacing: -0.01em;">System Logs</h1>
  </div>
</div>

<!-- Tier 2: Sticky Filter Toolbar (Professional Spacing) -->
<div style="position: sticky; top: 0; z-index: 20; background: #F9FAFB; padding: 24px 32px; border-bottom: 1px solid #E5E7EB; display: flex; justify-content: space-between; align-items: center;">
  
  <!-- Left: Info -->
  <div style="display: flex; gap: 16px; align-items: center;">
     <div style="height: 40px; padding: 0 16px; border-radius: 8px; background: white; border: 1px solid #E5E7EB; display: flex; align-items: center; color: #374151; font-weight: 500; font-size: 0.875rem;">
       ðŸ“œ History for all scraper jobs
     </div>
  </div>

  <!-- Right: Count -->
  <div style="display: flex; gap: 16px; align-items: center;">
     <div style="color: #6B7280; font-size: 0.875rem; font-weight: 500;">
      Total Logs: <strong style="color: #111827;">${logs.length}</strong>
    </div>
  </div>

</div>

<div class="grid-cols-2 mb-6" style="grid-template-columns: 2fr 1fr; padding: var(--space-6);">
  
  <!-- Logs Card -->
  <div class="card">
    ${logs.length === 0 ? `
      <div class="empty-state">
        <h3 class="text-lg font-medium">No logs recorded</h3>
        <p class="text-subtle">System is fresh or logs have been cleared.</p>
      </div>
    ` : `
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>Timestamp</th>
              <th>Platform</th>
              <th>Status</th>
              <th>Items</th>
              <th>Details</th>
            </tr>
          </thead>
          <tbody>
            ${logs.map(log => `
              <tr>
                <td class="text-xs text-subtle" style="white-space: nowrap;">
                  ${new Date(log.started_at).toLocaleString()}
                </td>
                <td><span class="badge badge-neu">${log.platform}</span></td>
                <td>
                  <span class="font-medium text-xs ${log.status === 'success' ? 'text-green-600' : log.status === 'failed' ? 'text-red-600' : 'text-amber-600'}">
                    ${log.status.toUpperCase()}
                  </span>
                </td>
                <td class="text-xs">
                  ${log.items_found} found
                  ${log.items_new > 0 ? `<span class="text-green-600 font-bold">(+${log.items_new})</span>` : ''}
                </td>
                <td class="text-xs text-subtle">
                  ${log.error ? `<span class="text-red-600 break-words">${log.error}</span>` : 'Completed successfully'}
                </td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      </div>
    `}
  </div>

  <!-- Commands Card -->
  <div class="card" style="height: fit-content;">
    <div class="card-header">
      <h3 class="card-title">Manual Actions</h3>
    </div>
    <div style="background-color: var(--background); padding: 16px; border-radius: var(--radius-md); font-family: monospace; font-size: 12px; color: var(--text-secondary);">
      <p class="mb-4 font-bold text-primary"># Terminal Commands</p>
      <p class="mb-2">npm run scrape:reddit</p>
      <p class="mb-2">npm run scrape:playstore</p>
      <p class="mb-2">npm run scrape:appstore</p>
      <p class="mb-2">npm run scrape:all</p>
    </div>
    <p class="mt-4 text-xs text-subtle">
      Note: Manual scrapes run in the background. Check logs for progress.
    </p>
  </div>
</div>
` }) %>
